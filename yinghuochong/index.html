<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>面向对象-萤火虫</title>
    <style type="text/css">
        *{
            padding:0;
            margin:0;
        }
       #bg{
            width:100%;
            height:100%;
            background:url("img/bg.jpg") no-repeat;
            background-size:cover ;
            position:fixed;
       }
        .new img{width:20px;height:20px;position: absolute;}
        .box{width:800px;margin:30px auto;_background:blue;clear:both;overflow: hidden;}
        .box img{display: block;float: left;width:20px;height:20px;visibility: hidden;}
        .box_i1,.box_i3{width:150px;height:20px;_background:red;float: left;}

        .box_i2{margin-left:60px;width:20px;height:260px;_background:red;}

        .first{width:150px;height:300px;float: left;}
        .second{width:400px;height:300px;_background:brown;float:left;position:relative;}
        .second img{position: absolute;}
        .third{width:250px;height:300px;float: left;_background:salmon;}
        .u1{width:20px;height:260px;_background:red;margin-left:20px; float: left;}
        .u3{width:20px;height:260px;_background:red;margin-right:20px;float: right;}
        .u2{width:170px;height:50px;_background:greenyellow;
          float: left;margin-top:220px;}

        .mt10{margin-top:10px;}
        .mt20{margin-top:20px;}
        .mt30{margin-top:30px;}

    </style>
</head>
<body>
    <div id="bg">

        <div class="box">
            <!-- I -->
          <!--  //7颗星-->
            <!--offsetleft 235; offsettop 30;-->
            <div class="first">
                <div class="box_i1">
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                </div>
               <!-- //12颗星-->
                <!--offsetleft 295; offsettop 50;-->
                <div class="box_i2">
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                </div>
                <!--//7颗星-->
                <!--offsetleft 235; offsettop 290;-->
                <div class="box_i3">
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                </div>
            </div>
            <!-- 心 -->
            <div class="second">

            </div>
            <!-- U-->
            <div class="third">
                <div class="u1">
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>


                </div>
                <div class="u2">
                    <img src="img/1.jpg"/>
                    <img class="mt10" src="img/1.jpg"/>
                    <img class="mt20" src="img/1.jpg"/>
                    <img class="mt30" src="img/1.jpg"/>
                    <img class="mt30" src="img/1.jpg"/>
                    <img class="mt20" src="img/1.jpg"/>
                    <img class="mt10" src="img/1.jpg"/>
                    <img src="img/1.jpg"/>

                </div>
                <div class="u3">
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>
                    <img src="img/1.jpg"/>

                </div>
            </div>

        </div>

        <div class="new">

        </div>

    </div>
<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
<script type="text/javascript">
    $(function(){


            /*  心型 star*/
        var $second = $(".second");
        function imgCreate(x,y){
            var $img = $("<img src='img/1.jpg'/>");
            $img.css("left",x+'px');
            $img.css("top",y+'px');
            $second.append($img);
        }

        function heartShape(r,dx,dy){ //r:大小;dx:水平偏移;dy:垂直偏移;
            var m,n,x,y,i;
            for(i = 0; i <= 50; i += 0.8){
                m = i;
                n = -r * (((Math.sin(i) * Math.sqrt(Math.abs(Math.cos(i)))) / (Math.sin(i) +1.5)) - 2 * Math.sin(i) + 2);
                x = n * Math.cos(m) + dx ;
                y = n * Math.sin(m) + dy;
                imgCreate(x,y);
            }
        }

        heartShape(60,160,40);



        function Particle(){//萤火虫构造器
            this.element = $("<img src='img/1.jpg'/> ")
        }
        Particle.prototype = {
            show: function(){//显示萤火虫
                this.element.css({"top":this.pointY + "px","left":this.pointX + "px"});
                $(".new").append(this.element);
                return this;
            },
            newPoint: function(){//随机获取屏幕上的坐标
                this.pointX = randomInt(window.innerWidth - 100);
                this.pointY = randomInt(window.innerHeight - 100);
                return this;
            },
            speed: function(){//萤火虫运动速度
                this.speedRun = (randomInt(10)+5)*1000;
                return this;
            },
            fly: function(posix,posiy){//萤火虫运动
                var self = this;
                this.element.animate({"top":posiy+"px","left":posix+"px"},this.speedRun,function(){
                    self.speed().newPoint().fly();
                });
            }
        };
        function randomInt(max){
            return Math.floor(Math.random()*max);
        }

//        var $box_i1 = $(".box_i1");
//        var $box_i2 = $(".box_i2");
       // var star  = [];
        var posiX = [];
        var posiY = [];
        //var arr1 = $box_i1.find("img");

        function getPoint(){
            var $img = $("img");

            for(var i = 0; i < $img.length; i ++) {
                posiX.push($img.eq(i).offset().left);
                posiY.push($img.eq(i).offset().top)
            }
        }

        getPoint();
        var star = [];
        var $img_len = $("img").size();

        for( var i = 0; i < $img_len; i++){
            star[i]  = new Particle();
            star[i].newPoint().show().speed().fly(posiX[i],posiY[i]);
        }





     /*   var num = 40;
        for( var i = 0; i < num ;i++ ){
            var p = new Particle();
            p.newPoint().show().speed().newPoint().fly();

        }
        */
    });



</script>
</body>
</html>